(()=>{"use strict";const e=e=>{const t=document.createElement("div");return t.id="projectListItems",e.forEach((e=>{const n=document.createElement("a"),d=document.createElement("br");n.setAttribute("href","#"),n.innerHTML=e.name,t.appendChild(n),t.appendChild(d)})),t},t=e=>{const t=e.todoList,n=e.name,d=document.createElement("div");d.id="todoItems";const o=document.createElement("button");return o.id="addTodoButton",o.dataset.project=n,o.innerHTML="Add Todo",d.appendChild(o),t.forEach((e=>{const t=document.createElement("div");t.classList.add("todoTile");const n=document.createElement("p");n.innerHTML=e.title,n.classList.add("todoTitle"),t.appendChild(n);const o=document.createElement("p");o.innerHTML=e.desc,o.classList.add("todoDesc"),t.appendChild(o);const c=document.createElement("p");c.innerHTML=e.project,c.classList.add("todoProject"),t.appendChild(c);const a=document.createElement("p");a.innerHTML=e.priority,a.classList.add("todoPriority"),t.appendChild(a);const s=document.createElement("p");s.innerHTML=e.dueDate,s.classList.add("todoDueDate"),t.appendChild(s);const r=document.createElement("p");r.innerHTML=e.createdDate,r.classList.add("todoCreatedDate"),t.appendChild(r),d.appendChild(t)})),d};class n{constructor(e){this.name=e,this.todoList=[]}}class d{constructor(e,t,n,d,o,c){this.title=e,this.desc=t,this.project=n,this.priority=d,this.dueDate=o,this.createdDate=c}}const o=(e,t)=>{const n=e[0].value,o=e[1].value,c=t,a=e[2].value,s=e[3].value;let r=new Date;const l=String(r.getDate()).padStart(2,"0"),i=String(r.getMonth()+1).padStart(2,"0"),m=r.getFullYear();return r=m+"-"+i+"-"+l,new d(n,o,c,a,s,r)};let c=[{name:"Test Project",todoList:[{title:"Test Todo",desc:"Test desc.",project:"Parent Project",priority:2,dueDate:"due date",createdDate:"created date"}]}];const a=document.getElementById("projectListContainer");let s=document.getElementById("projectListItems");const r=document.getElementById("addProjectButton"),l=document.getElementById("newProjectModal"),i=document.getElementById("closeProjectModal"),m=document.getElementById("newProjectForm"),p=document.getElementById("todoView");let u;const E=document.getElementById("newTodoModal"),L=document.getElementById("closeTodoModal"),h=document.getElementById("newTodoForm");function y(){localStorage.setItem("projects",JSON.stringify(c))}document.addEventListener("DOMContentLoaded",(()=>{localStorage.getItem("projects")?c=JSON.parse(localStorage.getItem("projects")):y(),a.appendChild(e(c)),s=document.getElementById("projectListItems"),g(s)}));const g=e=>{[...e.childNodes].filter((e=>"a"==e.localName)).forEach((e=>{e.addEventListener("click",(()=>{const n=c.filter((t=>t.name===e.outerText))[0];p.innerHTML="",p.appendChild(t(n)),u=document.getElementById("addTodoButton"),u.addEventListener("click",(()=>{E.style.display="block"}))}))}))};r.addEventListener("click",(()=>{l.style.display="block"}));const T=()=>{l.style.display="none",m.reset()};i.addEventListener("click",(()=>{T()})),window.addEventListener("click",(e=>{e.target==l&&T()})),m.addEventListener("submit",(t=>{t.preventDefault();const d=m.elements;c.push((e=>{const t=e[0].value;return new n(t)})(d)),y(),T(),a.innerHTML="",a.appendChild(e(c)),s=document.getElementById("projectListItems"),g(s)}));const I=()=>{E.style.display="none",h.reset()};L.addEventListener("click",(()=>{I()})),window.addEventListener("click",(e=>{e.target==E&&I()})),h.addEventListener("submit",(e=>{e.preventDefault();const n=h.elements,d=u.dataset.project;let a;for(let e=0;e<c.length;e++)if(c[e].name===a){a=c[e],c[e].todoList.push(o(n,d)),y();break}I(),p.innerHTML="",p.appendChild(t(a)),u=document.getElementById("addTodoButton"),u.addEventListener("click",(()=>{E.style.display="block"}))}))})();